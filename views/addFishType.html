<html>
    <body>

<div>


<!-- <form action="/api/fishtype" method="post">
    <h2>Add a new fish type!</h2>
    <input id="addAFish" name="fishtype" type="text"
    placeholder="add a new fish type" />
    <input type="submit" value="Submit" />
  </form> -->



  <form id="newPost">
    <label>
      Name
      <input type="text" id="newPostVal" />
    </label>
    <button type="submit">Add</button>
  </form>



</div>


   

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>


<script>

let BASE_URL = "http://192.168.1.123:5500"

const form = document.getElementById('newPost');

form.addEventListener('submit', async event => {
  event.preventDefault();

  const fishVal = document.querySelector('#newPostVal').value;

  const postVal = {
    fishtype: fishVal
  };
console.log(postVal);
  const submitFishType = await addFishType(postVal);
  //updateTodoList(submitFishType);
});


  const addFishType = async postVal => {
  try {
    const response = await axios.post(`${BASE_URL}/api/fishtype`, 
     postVal,
    { headers: {
      'Content-Type': 'application/x-www-form-urlencoded'
    
    }
  });
    const newFishType = response.data;

    alert(`Added a new fish type!`, newFishType)

    console.log(`Added a new Todo!`, newFishType);

    window.location.href = "main";

    return newFishType;
  } catch (errors) {
    console.error(errors);
  }
};


</script>



</body>
</html>