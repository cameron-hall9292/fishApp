



<body>
    <div>   
        <span>_id: </span>
        <span id="id" name="id"></span><br />
        <span>body_of_water: </span>
        <span id="water" name="water"></span><br />
        <span>bait: </span>
        <span id="bait" name="bait"></span><br />
        <span>cloudcover: </span>
        <span id="cloudcover" name="cloudcover"></span><br />
        <span>date: </span>
        <span id="date" name="date"></span><br />
        <span>fishtype: </span>
        <span id="fishtype" name="fishtype"></span><br />
        <span>location: </span>
        <span id="location" name="location"></span><br />
        <span>temp: </span>
        <span id="temp" name="temp"></span><br />
        <span>windspeed: </span>
        <span id="windspeed" name="windspeed"></span><br />
        <span>surface pressure: </span>
        <span id="surfacePressure" name="surfacePressure"></span><br />
        <button id="next" onclick="displayData()">NEXT</button>
        <button id="back" onclick="goBack()">BACK</button><br><br>


        <form action="/api/updateFish" method="post" id="update">


            <label for="_id">_id:</label>
            <input  type="text" id="_id" name="_id"/><br><br>

         
                <select
                id="bodyOfWater" 
                type="text"
              
                name="body_of_water" 
                placeholder="bait">
             
                </select>
          
                <select
                    id="baitSelect" 
                    type="text"
                  
                    name="baitSelect" 
                    placeholder="bait">
                    </select>
                <select
                    id="fishtypeSelect" 
                    type="text"  
                    name="fishtypeSelect" 
                    placeholder="fish type">
                </select>

              </label>
              <button type="submit">UPDATE</button>
            </form>

    </div>





</body>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>

    //create a journal with pages that can be turned 

let record = 0;

const idInst = document.getElementById("_id");
const id = document.getElementById("id");
const bodyOfWater = document.getElementById("water");
const bait = document.getElementById("bait");
const cloudcover = document.getElementById("cloudcover");
const date = document.getElementById("date");
const fishtype = document.getElementById("fishtype");
const locationLabel = document.getElementById("location");
const temp = document.getElementById("temp");
const windspeed = document.getElementById("windspeed");
const surfacePressure = document.getElementById("surfacePressure");


let fetchedData;

function fetchRecord(){

fetch(`http://localhost:5500/api/fish`) //api for the get request
.then((response) => response.json())
.then((data) => {
fetchedData = data;
console.log(fetchedData);
})
.then(() => {
displayData();
})
}

fetchRecord();

async function displayData(){

console.log(record);


if (record === fetchedData.length - 1) {

return

}
else {

record++;


id.innerHTML = await fetchedData[record]._id;

idInst.value = await fetchedData[record]._id;

bodyOfWater.innerHTML = await fetchedData[record].body_of_water;
 bait.innerHTML = await fetchedData[record].bait
 cloudcover.innerHTML = await fetchedData[record].cloudcover
 date.innerHTML = await fetchedData[record].date
 fishtype.innerHTML = await fetchedData[record].fishtype
 locationLabel.innerHTML = await fetchedData[record].location
 temp.innerHTML = await fetchedData[record].temp
 windspeed.innerHTML = await fetchedData[record].windspeed
 surfacePressure.innerHTML = await fetchedData[record].surfacePressure

}
}

async function goBack(){

    console.log(record);

if (record === 0) {
    return
}

else {
    
record--;



id.innerHTML = await fetchedData[record]._id;



idInst.value = await fetchedData[record]._id;
bodyOfWater.innerHTML = await fetchedData[record].body_of_water;
bait.innerHTML = await fetchedData[record].bait
cloudcover.innerHTML = await fetchedData[record].cloudcover
date.innerHTML = await fetchedData[record].date
fishtype.innerHTML = await fetchedData[record].fishtype
locationLabel.innerHTML = await fetchedData[record].location
temp.innerHTML = await fetchedData[record].temp
windspeed.innerHTML = await fetchedData[record].windspeed
surfacePressure.innerHTML = await fetchedData[record].surfacePressure

}

}



</script>




<script>




//fetch username data


let userID = document.getElementById("userID");


const fetchUsername = () => {
         fetch(`http://localhost:5500/api/userdata`) //api for the get request
        .then((response) => response.json())
        .then((data) => {
         console.log(data);
        
         //userID.value = data.id;
    
        })

      }

      fetchUsername();


//fetch data from fishlib and add it to the fishtype selection box

let fishLib;

let fishSelect = document.getElementById("fishtypeSelect");

const fetchFishLib = () => {
     fetch(`http://localhost:5500/api/fishtype`) //api for the get request
    .then((response) => response.json())
    .then((data) => {
     console.log(data);
    
     fishLib = data;

    })
    .then(() => {

    // fill fishtype selection box with fishtype data from fishLib collection

    const fishTypeMap = fishLib.map(fishSpecies => {

      var option = document.createElement("option");
    option.text = fishSpecies.fishtype;
    fishSelect.add(option);

    })

  

    })
  }

  fetchFishLib();



// fetch bait data and load it into the bait selection box


let baitLib;

let baitSelect = document.getElementById("baitSelect");

const fetchBaitLib = () => {
     fetch(`http://localhost:5500/api/bait`) //api for the get request
    .then((response) => response.json())
    .then((data) => {
     console.log(data);
    
     baitLib = data;

    })
    .then(() => {

    // fill fishtype selection box with fishtype data from fishLib collection

    const baitTypeMap = baitLib.map(bait => {

      var option = document.createElement("option");
    option.text = bait.bait;
    baitSelect.add(option);

    })

  

    })
  }

  fetchBaitLib();





  // fetch bait data and load it into the bait selection box
  
  
  let waterLib;
  
  let waterSelect = document.getElementById("bodyOfWater");
  
  const fetchWaterLib = () => {
       fetch(`http://localhost:5500/api/bodyofwater`) //api for the get request
      .then((response) => response.json())
      .then((data) => {
       console.log(data);
      
       waterLib = data;
  
      })
      .then(() => {
  
      // fill fishtype selection box with fishtype data from fishLib collection
  
      const bodyOfWaterMap = waterLib.map(water => {
  
        var option = document.createElement("option");
      option.text = water.body_of_water;
      waterSelect.add(option);
  
      })
  
    
  
      })
    }
  
    fetchWaterLib();
  

 
  
  // let BASE_URL = "http://192.168.1.123:5500"
  
  // const form = document.getElementById('update');
  
  // form.addEventListener('submit', async event => {
  //   event.preventDefault();
  
  
  
  // let fish_box = document.getElementById("fishtypeSelect").value
  
  // let bait_box = document.getElementById("baitSelect").value

  // let water_box = document.getElementById("bodyOfWater").value

 
  
  
  //   const postVal = {
  //     user_id: userID.value,
  //     body_of_water: water_box,
  //     fishtype: fish_box,
  //     bait: bait_box,
  //   };

    
  // console.log(postVal);
  //   const submitCatch = await addCatch(postVal);
  //   //updateTodoList(submitFishType);
  // });
  
  
  //   const addCatch = async postVal => {
  //   try {
  //     const response = await axios.post(`${BASE_URL}/api/updateFish`, 
  //      postVal,
  //     { headers: {
  //       'Content-Type': 'application/x-www-form-urlencoded'
      
  //     }
  //   });
  //     const updatedCatch = response.data;
  
  //     alert(`you updated a catch!`, updatedCatch)
  
  //     console.log(`updated a catch!`, updatedCatch);
  
  //     window.location.href = "table";
  
  //     return updatedCatch;
  //   } catch (errors) {
  //     console.error(errors);
  //   }
  // };
      </script>
  